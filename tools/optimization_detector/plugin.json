{
  "id": "optimization_detector",
  "name": "SO编译优化",
  "description": "检测二进制文件的优化级别和LTO（链接时优化）",
  "version": "1.0.0",
  "author": "HapRay Team",
  "execution": {
    "debug": {
      "cmd": ["./.venv/bin/python", "./.venv/Scripts/python.exe"],
      "script": "cli.py"
    },
    "release": {
      "cmd": ["opt-detector", "opt-detector.exe", "dist/opt-detector/opt-detector.exe", "dist/opt-detector/opt-detector"]
    }
  },
  "actions": {
    "opt": {
      "name": "优化检测",
      "description": "检测二进制文件的优化级别和LTO（链接时优化）",
      "action_mapping": {
        "type": "remove"
      },
      "parameters": {
        "input": {
          "type": "dir",
          "label": "输入路径",
          "required": true,
          "short": "i",
          "help": "包含二进制文件的目录或单个文件路径"
        },
        "output": {
          "type": "file",
          "label": "输出文件",
          "required": false,
          "default": "binary_analysis_report.xlsx",
          "short": "o",
          "help": "输出Excel文件路径"
        },
        "jobs": {
          "type": "int",
          "label": "并行任务数",
          "required": false,
          "default": 1,
          "short": "j",
          "help": "并行处理的任务数量"
        },
        "no_lto": {
          "type": "bool",
          "label": "禁用LTO检测",
          "required": false,
          "default": false,
          "help": "禁用LTO（链接时优化）检测"
        },
        "no_opt": {
          "type": "bool",
          "label": "禁用优化级别检测",
          "required": false,
          "default": false,
          "help": "禁用优化级别（Ox）检测，仅运行LTO检测"
        },
        "verbose": {
          "type": "bool",
          "label": "详细输出",
          "required": false,
          "default": false,
          "help": "显示详细日志"
        }
      }
    }
  },
  "global-config": {
    "description": "全局配置项",
    "items": {
      "output_dir": {
        "type": "str",
        "label": "默认输出目录",
        "default": "./hapray_output",
        "help": "工具的默认输出目录",
        "required": false
      },
      "log_level": {
        "type": "choice",
        "label": "日志级别",
        "default": "INFO",
        "choices": ["DEBUG", "INFO", "WARNING", "ERROR"],
        "help": "全局日志输出级别",
        "required": false
      }
    }
  }
}

