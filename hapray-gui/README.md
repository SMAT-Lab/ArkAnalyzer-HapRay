# HapRay GUI

HapRay GUIæ˜¯ä¸€ä¸ªé›†æˆå¤šä¸ªå·¥å…·çš„ç»Ÿä¸€å›¾å½¢ç•Œé¢å¹³å°ï¼Œæ•´åˆäº†ä»¥ä¸‹å·¥å…·ï¼š

- **åŠ¨æ€æµ‹è¯•** (perf_testing) - æ€§èƒ½æµ‹è¯•å’Œtraceæ”¶é›†
  - æ”¯æŒ5ä¸ªæ“ä½œï¼šæ€§èƒ½æµ‹è¯•ã€ç®€åŒ–æµ‹è¯•æ‰§è¡Œã€æ›´æ–°æŠ¥å‘Šã€å¯¹æ¯”æŠ¥å‘Š
- **ä¼˜åŒ–æ£€æµ‹** (optimization_detector) - äºŒè¿›åˆ¶æ–‡ä»¶ä¼˜åŒ–çº§åˆ«å’ŒLTOæ£€æµ‹
- **ç¬¦å·æ¢å¤** (symbol_recovery) - äºŒè¿›åˆ¶ç¬¦å·æ¢å¤å·¥å…·
- **é™æ€åˆ†æ** (static_analyzer) - HAPé™æ€åˆ†æ

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ ç»Ÿä¸€çš„å›¾å½¢ç•Œé¢ï¼Œæ–¹ä¾¿ä½¿ç”¨
- ğŸ”§ å¯è§†åŒ–å‚æ•°é…ç½®
- ğŸ“Š å®æ—¶æ‰§è¡Œè¾“å‡ºæ˜¾ç¤º
- ğŸ“ ç»“æœå†å²æŸ¥çœ‹
- âš™ï¸ å·¥å…·è·¯å¾„é…ç½®ç®¡ç†
- ğŸ”€ **å¤šActionæ”¯æŒ** - å•ä¸ªå·¥å…·æ”¯æŒå¤šç§æ“ä½œæ¨¡å¼
- ğŸ“‚ **å¢å¼ºçš„ç»“æœç®¡ç†** - å¿«é€Ÿæ‰“å¼€è¾“å‡ºç›®å½•å’Œå¤åˆ¶è·¯å¾„

## å®‰è£…

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ npmï¼ˆæ¨èï¼‰

1. å®‰è£… Node.jsï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

2. è¿è¡Œå®‰è£…è„šæœ¬ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–ï¼‰ï¼š
```bash
npm install
```

æˆ–è€…æ‰‹åŠ¨è¿è¡Œï¼š
```bash
npm run setup
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…

1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š
```bash
python -m venv .venv
```

2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š
   - Windows: `.venv\Scripts\activate`
   - Linux/Mac: `source .venv/bin/activate`

3. å®‰è£…ä¾èµ–ï¼š
```bash
pip install -r requirements.txt
```

## ä½¿ç”¨æ–¹æ³•

### å¼€å‘æ¨¡å¼è¿è¡Œ

ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè¿è¡Œï¼š
```bash
npm run run:venv
```

æˆ–ç›´æ¥è¿è¡Œï¼š
```bash
python main.py
```

### æ‰“åŒ…å‘å¸ƒ

æ‰“åŒ…ä¸ºç›®å½•å½¢å¼ï¼ˆæ¨èï¼Œå¯åŠ¨æ›´å¿«ï¼‰ï¼š
```bash
npm run build
```

æˆ–è€…ç›´æ¥ä½¿ç”¨æ‰“åŒ…è„šæœ¬ï¼š
```bash
# macOS/Linux
./build.sh

# Windows
build.bat
```

æ‰“åŒ…ä¸ºå•æ–‡ä»¶ï¼ˆä½“ç§¯æ›´å¤§ï¼Œä½†ä¾¿äºåˆ†å‘ï¼‰ï¼š
```bash
npm run build:onefile
```

**æ‰“åŒ…è¯´æ˜ï¼š**
- GUI å¯æ‰§è¡Œæ–‡ä»¶ä¼šè¾“å‡ºåˆ°æ ¹ç›®å½•çš„ `dist/HapRay-GUI`ï¼ˆæˆ– `HapRay-GUI.exe`ï¼‰
- å·¥å…·æ’ä»¶ä» `dist/tools/` ç›®å½•åŠ è½½
- æ‰“åŒ…è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç† Python è¿è¡Œæ—¶å…±äº«ï¼Œé¿å…æ¯ä¸ªå·¥å…·çš„ `_internal` ç›®å½•é‡å¤åŒ…å« `Python3.framework`ï¼ˆmacOSï¼‰æˆ– Python DLLï¼ˆWindowsï¼‰
- å…±äº«çš„ Python è¿è¡Œæ—¶ä½äº `dist/_shared_python/` ç›®å½•

### æ¸…ç†

æ¸…ç†æ„å»ºæ–‡ä»¶å’Œè™šæ‹Ÿç¯å¢ƒï¼š
```bash
npm run clean
```

## é…ç½®

é¦–æ¬¡è¿è¡Œä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º `~/.hapray-gui/config.json` é…ç½®æ–‡ä»¶ã€‚

å¯ä»¥é€šè¿‡"å·¥å…· -> è®¾ç½®"èœå•é…ç½®å„ä¸ªå·¥å…·çš„è·¯å¾„ã€‚

## å¼€å‘

### é¡¹ç›®ç»“æ„

```
hapray-gui/
â”œâ”€â”€ main.py                    # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ main.spec                  # PyInstaller æ‰“åŒ…é…ç½®
â”œâ”€â”€ setup_env.py              # è™šæ‹Ÿç¯å¢ƒè®¾ç½®è„šæœ¬
â”œâ”€â”€ package.json              # npm è„šæœ¬é…ç½®
â”œâ”€â”€ requirements.txt          # Python ä¾èµ–
â”œâ”€â”€ core/                     # æ ¸å¿ƒå…¬å…±æ¨¡å—
â”œâ”€â”€ gui/                      # GUIç›¸å…³æ¨¡å—
â”œâ”€â”€ tools/                    # å…·ä½“å·¥å…·å®ç°
â””â”€â”€ resources/                # èµ„æºæ–‡ä»¶
```

### æ„å»ºè¯´æ˜

- `npm run setup`: åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
- `npm run build`: ä½¿ç”¨ PyInstaller æ‰“åŒ…ä¸ºç›®å½•å½¢å¼ï¼ˆä¼šè‡ªåŠ¨å…±äº« Python è¿è¡Œæ—¶ï¼‰
- `npm run build:onefile`: æ‰“åŒ…ä¸ºå•æ–‡ä»¶
- `npm run clean`: æ¸…ç†æ„å»ºæ–‡ä»¶å’Œè™šæ‹Ÿç¯å¢ƒ

**æ‰“åŒ…è¾“å‡ºï¼š**
- GUI å¯æ‰§è¡Œæ–‡ä»¶ï¼š`../dist/HapRay-GUI`ï¼ˆæˆ– `HapRay-GUI.exe`ï¼‰
- å·¥å…·ç›®å½•ï¼š`../dist/tools/`
- å…±äº« Python è¿è¡Œæ—¶ï¼š`../dist/_shared_python/`

**Python è¿è¡Œæ—¶å…±äº«ï¼š**
æ‰“åŒ…è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œ `share_python_runtime.py` åå¤„ç†è„šæœ¬ï¼Œå°†æ‰€æœ‰å·¥å…·çš„ Python è¿è¡Œæ—¶ï¼ˆmacOS ä¸Šçš„ `Python3.framework`ï¼ŒWindows ä¸Šçš„ Python DLLï¼‰å…±äº«åˆ°ç»Ÿä¸€ç›®å½•ï¼Œé¿å…é‡å¤ã€‚æ¯ä¸ªå·¥å…·çš„ `_internal` ç›®å½•ä¼šé€šè¿‡ç¬¦å·é“¾æ¥ï¼ˆæˆ–å¤åˆ¶ï¼‰æŒ‡å‘å…±äº«çš„è¿è¡Œæ—¶ã€‚

## ç›®å½•ç»“æ„

```
hapray-gui/
â”œâ”€â”€ main.py                    # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ core/                      # æ ¸å¿ƒå…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ base_tool.py          # å·¥å…·åŸºç±»
â”‚   â”œâ”€â”€ config_manager.py     # é…ç½®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ tool_executor.py      # å·¥å…·æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ result_processor.py   # ç»“æœå¤„ç†å™¨
â”‚   â”œâ”€â”€ file_utils.py         # æ–‡ä»¶å·¥å…·ç±»
â”‚   â””â”€â”€ logger.py             # æ—¥å¿—ç®¡ç†å™¨
â”œâ”€â”€ gui/                       # GUIç›¸å…³æ¨¡å—
â”‚   â”œâ”€â”€ main_window.py        # ä¸»çª—å£
â”‚   â”œâ”€â”€ tool_pages.py         # å·¥å…·é¡µé¢
â”‚   â”œâ”€â”€ result_viewer.py      # ç»“æœæŸ¥çœ‹å™¨
â”‚   â””â”€â”€ settings_dialog.py    # è®¾ç½®å¯¹è¯æ¡†
â”œâ”€â”€ tools/                     # å…·ä½“å·¥å…·å®ç°
â”‚   â”œâ”€â”€ perf_testing/         # åŠ¨æ€æµ‹è¯•å·¥å…·
â”‚   â”œâ”€â”€ optimization_detector/ # ä¼˜åŒ–æ£€æµ‹å·¥å…·
â”‚   â”œâ”€â”€ symbol_recovery/      # ç¬¦å·æ¢å¤å·¥å…·
â”‚   â””â”€â”€ sa/                   # é™æ€åˆ†æå·¥å…·
â””â”€â”€ resources/                 # èµ„æºæ–‡ä»¶
```

## å¼€å‘

é¡¹ç›®ä½¿ç”¨PySide6æ„å»ºGUIç•Œé¢ï¼Œé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•æ–°å·¥å…·ã€‚

## è®¸å¯è¯

Apache License 2.0

