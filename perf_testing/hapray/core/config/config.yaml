hiperf: # 性能采样相关
  enable: True
  duration: 30  # 默认采样时长（秒）
  output_path: "/data/local/tmp/perf.data"  # 性能数据在手机中的输出路径
  data_filename: "perf.data"  # 性能数据文件名
  db_filename: "perf.db"  # 数据库文件名
  event: raw-instruction-retired # 默认采集指令数，可配置为raw-cpu-cycles采集cycles
trace:
  enable: True
memory:
  enable: False  # Memory采集开关（通过命令行参数控制）
  max_stack_depth: 100  # Native Memory采集的最大调用栈深度
  interval_seconds: 2  # Level1 Memory采集的间隔时间（秒）
  snapshot_enable: False  # Snapshot采集开关
ui:
  capture_enable: True  # UI数据采集开关（截图和组件树）

# hilog日志分析配置
hilog:
  # 正则匹配规则，每个规则包含regex、groups和conditions
  # groups: 要提取的分组索引（从1开始，0表示整个匹配）
  # conditions: 条件过滤，支持两种格式：
  #   1. 数组格式：与groups一一对应，支持运算符：==, !=, <, >, <=, >=
  #   2. 表达式字符串：支持分组值的数学运算和比较（包含$符号时自动识别为表达式）
  #      表达式语法：
  #      - $1, $2, $3... 表示第1、2、3...个提取的分组值（对应groups配置中的位置）
  #      - 支持数学运算：+, -, *, /, %
  #      - 支持比较运算符：==, !=, <, >, <=, >=
  #      - 支持括号：()
  #      - 支持多个表达式（AND逻辑）：用逗号或 && 分隔，所有表达式都满足才匹配
  #   示例：
  #     - conditions: ["!=4"]  # 数组格式：分组1 != 4
  #     - conditions: "$1 * $2 > $3 * $4"  # 表达式格式：分组1和2的乘积大于分组3和4的乘积
  #     - conditions: "$1*$2>0,$3*$4>512*512"  # 多个表达式：分组1*2>0 且 分组3*4>512*512
  patterns:
    - name: "no_dmp"  # 规则名称
      regex: "CreatePixelMap success,.*memType\\s*:\\s*(\\d+),\\s*cost\\s+\\d+\\s+us"  # 正则表达式，带分组
      # regex: "CreatePixelMapExtended success,.*memoryType\\s*:\\s*(\\d+),\\s*cost\\s+\\d+\\s+us"  # 正则表达式，带分组
      groups: [1]  # 要提取的分组索引（从1开始，0表示整个匹配）
      conditions: "$1!=4"  # 条件过滤，与groups一一对应，满足条件才计数
    # 示例规则2：使用conditions表达式格式（复杂计算）
    # - name: "图片解码宽高乘积比较"
    #   regex: "CreatePixelMap.*width\\s*:\\s*(\\d+).*height\\s*:\\s*(\\d+).*width2\\s*:\\s*(\\d+).*height2\\s*:\\s*(\\d+)"
    #   groups: [1, 2, 3, 4]  # 提取4个分组：width1, height1, width2, height2
    #   conditions: "$1 * $2 > $3 * $4"  # 第一个宽高乘积大于第二个宽高乘积

    # 示例规则3：使用多个表达式（AND逻辑）
    # - name: "多条件匹配示例"
    #   regex: "value1\\s*:\\s*(\\d+).*value2\\s*:\\s*(\\d+).*value3\\s*:\\s*(\\d+).*value4\\s*:\\s*(\\d+)"
    #   groups: [1, 2, 3, 4]  # 提取4个分组
    #   conditions: "$1*$2>0,$3*$4>512"  # 分组1*2>0 且 分组3*4>512（使用逗号分隔）
    #   # 或者使用 && 分隔：conditions: "$1*$2>0 && $3*$4>512"

    # 规则：CreatePixelMapExtended 图片解码尺寸检查
    - name: "big_image_with_target_size"
      regex: "CreatePixelMap success.*dSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\).*srcSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\)"
      # regex: "CreatePixelMapExtended success.*desiredSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\).*imageSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\)"
      groups: [1, 2, 3, 4]  # 提取4个分组：desiredSize的宽高，imageSize的宽高
      conditions: "$1*$2>0,$3*$4>512*512"  # desiredSize面积>0 且 imageSize面积>512*512
    - name: "big_image_without_target_size"
      regex: "CreatePixelMap success.*dSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\).*srcSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\)"
      # regex: "CreatePixelMapExtended success.*desiredSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\).*imageSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\)"
      groups: [1, 2, 3, 4]  # 提取4个分组：desiredSize的宽高，imageSize的宽高
      conditions: "$1*$2==0,$3*$4>512*512"  # desiredSize面积>0 且 imageSize面积>512*512
    - name: "image_same_size"
      regex: "CreatePixelMap success.*dSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\).*srcSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\)"
      # regex: "CreatePixelMapExtended success.*desiredSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\).*imageSize\\s*:\\s*\\((\\d+),\\s*(\\d+)\\)"
      groups: [1, 2, 3, 4]  # 提取4个分组：desiredSize的宽高，imageSize的宽高
      conditions: "$1*$2==$3*$4"  # desiredSize面积>0 且 imageSize面积>512*512

# 帧分析配置
frame_analysis:
  # 进行深度分析的TOP N卡顿帧数量
  # 建议值: 5-20，根据性能需求调整
  top_n_analysis: 10

# 调用链精化过滤配置
callchain_filter:
  # 文件和符号绑定排除规则（文件和符号必须同时匹配才排除）
  # 使用YAML锚点避免重复定义符号列表
  exclude_rules:
    # 匹配包含 libc 或 libc++ 的 .so 文件（包含关系）
    '.*libc(\+\+)?\.so.*': 
      - '.*'
    # ld-musl-aarch64.so 
    '.*ld-musl-aarch64\.so.*': 
      - '.*'
    # libc++_shared.so 
    '.*libc\+\+_shared\.so.*': 
      - '.*'
    # /system/lib64/chipset-pub-sdk/libutils.z.so
    '.*/system/lib64/chipset-pub-sdk/libutils\.z\.so':
      - 'OHOS::Parcel::Parcel()'

gui-agent:
  scenes:
    ecommerce:
      - '浏览首页，切换至少 3 个 Tab/频道，随机打开 2 个商品/内容详情后返回。'
      - '使用搜索功能搜索"蓝牙耳机"，在结果页尝试筛选/排序，打开一个商品详情并查看图片/详情区域。'
      - '进入分类/频道页，选择一个类目进入列表，滑动浏览两屏并打开一个详情后返回。'
      - '进入购物车/待购清单相关入口，查看页面结构后返回（不下单）。'
      - '进入"我的/个人中心"，查看订单/收藏/足迹/设置等入口（不登录可跳过）。'
      - '在商品详情页尝试"收藏/关注/加入购物车"等入口，如要求登录则取消并返回。'
      - '尝试打开"活动/优惠/会员"相关页面，浏览后返回首页。'
      - '打开客服/帮助中心/售后规则等入口，查看常见问题后返回。'
      - '尝试分享入口（分享到系统分享面板）后立即取消，返回应用。'
      - '通过搜索进入一个店铺/品牌页（或商品关联页面），浏览后返回首页。'
    finance:
      - '浏览首页，查看常见功能入口（转账/理财/信用卡等），不要进入真实交易流程。'
      - '进入登录/注册页面，查看支持的登录方式后返回（不要输入真实信息）。'
      - '寻找"网点/ATM/附近"相关入口（如有），打开地图页后返回。'
      - '浏览理财/基金/保险等产品列表页，打开一个产品详情后返回（不购买）。'
      - '打开消息/公告/通知中心相关入口，浏览后返回。'
      - '打开设置/隐私/安全中心相关入口，浏览后返回（不修改关键设置）。'
      - '寻找"帮助/客服/在线客服"入口，打开后返回。'
      - '查看"我的/账户/个人中心"入口，停留 3 秒后返回（不登录可跳过）。'
      - '在首页尝试下拉刷新/滑动浏览，打开一个卡片详情后返回。'
      - '完成一次完整的页面回环：首页 → 任意二级页面 → 再返回首页。'
    travel:
      - '浏览首页，切换至少 2 个 Tab/频道，打开一个推荐内容/卡片后返回。'
      - '使用搜索功能搜索"北京南站"（或任意地点），打开详情页并查看周边信息后返回。'
      - '尝试规划路线：从"当前位置"到"附近商场/车站"（可选推荐），进入路线页后返回（不下单）。'
      - '打开"附近/周边/推荐"入口，浏览列表并打开一个详情后返回。'
      - '打开"收藏/历史/我的"入口，查看页面结构后返回（不登录可跳过）。'
      - '尝试在地图/列表中缩放/滑动浏览 2 屏，打开一个标注点详情后返回。'
      - '在搜索结果页尝试筛选/排序（如有），打开一个结果详情后返回。'
      - '打开设置/帮助/客服相关入口，浏览后返回。'
      - '尝试分享入口并取消分享，返回应用。'
      - '完成一次：首页 → 任意详情页 → 返回首页，并确保界面稳定。'
    video:
      - '浏览首页推荐内容，滑动浏览 3 屏并打开一个内容详情/播放页后返回。'
      - '使用搜索功能搜索"美食"，打开一个结果并进入播放页，停留 5 秒后返回。'
      - '切换频道/Tab（如关注/同城/推荐/热门），每个 Tab 浏览一屏。'
      - '在播放页尝试打开评论/弹幕/简介等区域，浏览后返回（不发布）。'
      - '打开"我的/个人中心"，查看历史/收藏/设置等入口（不登录可跳过）。'
      - '尝试在播放页点赞/收藏/关注，如要求登录则取消并返回。'
      - '尝试打开"消息/通知/私信"入口（如有），浏览后返回。'
      - '尝试分享入口并取消分享，返回应用。'
      - '进入设置/隐私/关于等页面，浏览后返回。'
      - '完成：首页 → 搜索 → 播放 → 返回首页 的链路。'
    audio_reading:
      - '浏览首页推荐内容，滑动 3 屏并打开一个内容详情页后返回。'
      - '使用搜索功能搜索"历史"，打开一个结果详情页并浏览后返回。'
      - '切换频道/分类（如推荐/榜单/分类/书架），每个频道浏览一屏。'
      - '打开一个内容并尝试开始播放/阅读，停留 5 秒后返回。'
      - '打开"书架/收藏/历史"入口，查看列表后返回（不登录可跳过）。'
      - '在内容详情页尝试收藏/加入书架，如要求登录则取消并返回。'
      - '尝试打开评论/简介/章节列表等入口，浏览后返回（不发布）。'
      - '进入设置/定时/下载/清理缓存等入口（如有），只浏览不执行危险操作。'
      - '尝试分享入口并取消分享，返回应用。'
      - '完成：首页 → 搜索 → 详情 → 返回首页 的链路。'
    social:
      - '浏览首页内容流，滑动 3 屏并打开一个内容详情页后返回。'
      - '使用搜索功能搜索"上海"，打开一个结果详情页后返回。'
      - '切换至少 3 个 Tab/频道（如关注/推荐/热搜/发现），每个浏览一屏。'
      - '打开消息/通知中心，浏览后返回（不发送/不发布）。'
      - '打开个人主页/我的页面，查看设置/隐私/帮助入口后返回。'
      - '打开一个话题/榜单/热搜入口，进入列表并打开一个详情后返回。'
      - '尝试点赞/收藏一个内容，如要求登录则取消并返回。'
      - '尝试分享入口并取消分享，返回应用。'
      - '进入设置/关于/隐私政策页面，浏览后返回。'
      - '完成：首页 → 详情 → 返回首页 的链路，确保 UI 稳定。'
    productivity:
      - '浏览首页，切换至少 2 个 Tab/模块（如文档/消息/云盘/工具），每个浏览一屏。'
      - '打开"搜索"，搜索"测试"，打开一个结果或空结果页后返回。'
      - '打开"我的/个人中心"，查看设置/帮助/关于等入口后返回。'
      - '打开消息/通知/协作相关入口，浏览后返回（不发送/不修改）。'
      - '打开一个列表项（文档/文件/会话等），进入详情页后返回。'
      - '尝试新建入口（新建文档/上传等），进入到下一步前停止并返回（不创建）。'
      - '进入设置页面，查看隐私/权限/清理缓存入口后返回。'
      - '打开帮助中心/客服入口，浏览常见问题后返回。'
      - '尝试分享入口并取消分享，返回应用。'
      - '完成一次：首页 → 任意二级页面 → 返回首页。'
    news:
      - '浏览首页资讯流，滑动 3 屏并打开一条新闻详情后返回。'
      - '使用搜索功能搜索"科技"，打开一条结果详情后返回。'
      - '切换频道（如推荐/热点/视频/本地），每个频道浏览一屏。'
      - '在新闻详情页浏览评论/相关推荐区域（不发评论），然后返回。'
      - '打开"我的/个人中心"，查看历史/收藏/设置等入口后返回。'
      - '尝试收藏/关注频道，如要求登录则取消并返回。'
      - '打开通知/消息/公告入口（如有），浏览后返回。'
      - '进入设置/隐私/关于页面，浏览后返回。'
      - '尝试分享入口并取消分享，返回应用。'
      - '完成：首页 → 搜索 → 详情 → 返回首页 的链路。'
    photo_video_edit:
      - '浏览首页功能入口（修图/模板/相机/工具），打开一个功能页后返回。'
      - '打开"相册/导入"入口，看到选择图片界面后立即返回（避免访问隐私内容）。'
      - '打开一个模板/教程/素材推荐页，浏览一屏后返回。'
      - '尝试搜索"证件照/滤镜"，打开一个结果页后返回。'
      - '打开设置/隐私/权限相关页面，浏览后返回。'
      - '打开帮助/教程/客服入口，浏览后返回。'
      - '在首页滑动浏览 3 屏，打开一个推荐内容详情后返回。'
      - '尝试分享入口并取消分享，返回应用。'
      - '完成：首页 → 任意二级页面 → 返回首页。'
      - '尝试切换主题/语言/水印等设置入口（如有），只浏览不保存修改。'
    education:
      - '浏览首页，查看常见功能入口（课程/练习/错题/工具），打开一个入口后返回。'
      - '使用搜索功能搜索"数学"，打开一个结果/课程详情页后返回。'
      - '切换频道/年级/科目（如有），每个浏览一屏。'
      - '打开"我的/个人中心"，查看设置/帮助入口后返回（不登录可跳过）。'
      - '打开"消息/通知"入口（如有），浏览后返回。'
      - '打开"学习计划/打卡/积分"等入口（如有），只浏览不提交。'
      - '打开"工具箱/拍照搜题"等入口，看到权限提示后取消并返回。'
      - '进入设置/隐私/关于页面，浏览后返回。'
      - '尝试分享入口并取消分享，返回应用。'
      - '完成：首页 → 任意详情页 → 返回首页。'
    default:
      - '浏览首页/主界面，切换至少 2 个 Tab/模块，打开一个二级页面后返回。'
      - '使用搜索功能搜索"测试"，查看结果页后返回。'
      - '打开设置/关于/隐私政策入口，浏览后返回。'
      - '打开帮助/客服/反馈入口，浏览后返回。'
      - '打开消息/通知入口（如有），浏览后返回。'
      - '打开"我的/个人中心"入口（如有），查看主要入口后返回。'
      - '滑动浏览列表 3 屏，打开一个详情页后返回。'
      - '尝试分享入口并取消分享，返回应用。'
      - '尝试收藏/关注/点赞（如有），如要求登录则取消并返回。'
      - '完成：主界面 → 任意二级页面 → 返回主界面。'



