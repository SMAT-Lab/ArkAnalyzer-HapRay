hiperf: # 性能采样相关
  duration: 30  # 默认采样时长（秒）
  output_path: "/data/local/tmp/perf.data"  # 性能数据在手机中的输出路径
  data_filename: "perf.data"  # 性能数据文件名
  db_filename: "perf.db"  # 数据库文件名
  event: raw-instruction-retired # 默认采集指令数，可配置为raw-cpu-cycles采集cycles
trace:
  enable: True
memory:
  enable: False  # Memory采集开关（通过命令行参数控制）
  max_stack_depth: 100  # Native Memory采集的最大调用栈深度

# 帧分析配置
frame_analysis:
  # 进行深度分析的TOP N卡顿帧数量
  # 建议值: 5-20，根据性能需求调整
  top_n_analysis: 10

# 调用链精化过滤配置
callchain_filter:
  # 文件和符号绑定排除规则（文件和符号必须同时匹配才排除）
  # 使用YAML锚点避免重复定义符号列表
  exclude_rules:
    # 共享的内存分配符号列表
    shared_memory_symbols: &shared_memory_symbols
      - 'new'
      - 'new\[\]'
      - 'operator new'
      - 'operator new\[\]'
      - 'std::make_shared'
      - 'std::make_unique'
      - 'delete'
      - 'delete\[\]'
      - 'operator delete'
      - 'operator delete\[\]'
      - 'aligned_alloc'
      - 'asprintf'
      - 'calloc'
      - 'canonicalize_file_name'
      - 'get_current_dir_name'
      - 'getaddrinfo'
      - 'getcwd'
      - 'getdelim'
      - 'gethostbyaddr'
      - 'gethostbyname'
      - 'getline'
      - 'malloc'
      - 'memalign'
      - 'mkdtemp'
      - 'mkstemp'
      - 'pvalloc'
      - 'realloc'
      - 'realpath'
      - 'strdup'
      - 'strndup'
      - 'tempnam'
      - 'tmpnam'
      - 'valloc'
      - 'vasprintf'
      - 'free'
      - 'freeaddrinfo'
      - 'mmap'
      - 'posix_memalign'
      - 'munmap'

    # 匹配包含 libc 或 libc++ 的 .so 文件（包含关系）
    '.*libc(\+\+)?\.so.*': *shared_memory_symbols
    # ld-musl-aarch64.so 也对应相同的内存分配符号
    '.*ld-musl-aarch64\.so.*': *shared_memory_symbols
    # libc++_shared.so 也对应相同的内存分配符号
    '.*libc\+\+_shared\.so.*': *shared_memory_symbols





